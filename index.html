<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OKR Master - Cori Talks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; scroll-behavior: smooth; }
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .card-shadow { box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05); }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900 h-screen overflow-hidden">

    <div id="app" class="h-full w-full">
        <!-- Render dinámico -->
    </div>

    <script>
        // --- ESTADO INICIAL ---
        const DEFAULT_SHEET_URL = "https://script.google.com/macros/s/AKfycbz9hTBQlGDWQIWHFUvDookbqzc4YSYu2cCY997YvwgksQoWKkl_Hx7-58dYBv3-yGl9zQ/exec";
        
        let state = {
            user: null,
            activeTab: 'dashboard',
            isLoading: false,
            isSaving: false,
            sheetUrl: DEFAULT_SHEET_URL,
            lastSync: "Nunca",
            showModal: false,
            editingProject: null, // Proyecto en edición
            notification: null,
            squads: [
                { id: 'S1', name: 'Squad Alpha (Cori Talks)' },
                { id: 'S2', name: 'Squad Beta (LMS Optimization)' },
                { id: 'S3', name: 'Squad Gamma (Innovación)' }
            ],
            roles: ['Super Admin', 'PO', 'Scrum Master', 'Developer'],
            projects: [
                {
                    id: 'P1',
                    squadId: 'S1',
                    name: "Cori Talks",
                    description: "Espacio diseñado para conectar e inspirar a través del conocimiento.",
                    objectives: [
                        {
                            id: 'O1',
                            title: "Fortalecer la cultura de aprendizaje",
                            krs: [
                                { id: 'KR1.1', definition: '40% colaboradores conectados', target: 40, current: 28, owner: 'Gestión Humana' },
                                { id: 'KR1.2', definition: '85% satisfacción encuestas', target: 85, current: 80, owner: 'Comunicaciones' }
                            ]
                        }
                    ]
                }
            ]
        };

        // --- LÓGICA DE CÁLCULO ---
        function calculateObjectiveProgress(objective) {
            if (!objective.krs || objective.krs.length === 0) return 0;
            const total = objective.krs.reduce((acc, kr) => acc + (Math.min(kr.current / kr.target, 1)), 0);
            return Math.round((total / objective.krs.length) * 100);
        }

        function calculateProjectProgress(project) {
            if (!project.objectives || project.objectives.length === 0) return 0;
            const total = project.objectives.reduce((acc, obj) => acc + calculateObjectiveProgress(obj), 0);
            return Math.round(total / project.objectives.length);
        }

        function getGlobalProgress(filtered) {
            if (!filtered.length) return 0;
            const total = filtered.reduce((acc, p) => acc + calculateProjectProgress(p), 0);
            return Math.round(total / filtered.length);
        }

        // --- ACCIONES ---
        function notify(msg, type = 'success') {
            state.notification = { msg, type };
            render();
            setTimeout(() => { state.notification = null; render(); }, 3000);
        }

        function handleLogin(email, role, squadId) {
            state.user = { name: email.split('@')[0], role, squadId: role === 'Super Admin' ? null : squadId };
            render();
        }

        function openModal(projectId = null) {
            if (projectId) {
                const p = state.projects.find(proj => proj.id === projectId);
                state.editingProject = JSON.parse(JSON.stringify(p)); // Clon profundo
            } else {
                state.editingProject = {
                    id: 'P' + Date.now(),
                    squadId: state.user.squadId || 'S1',
                    name: '',
                    description: '',
                    objectives: []
                };
            }
            state.showModal = true;
            render();
        }

        function saveProject() {
            const index = state.projects.findIndex(p => p.id === state.editingProject.id);
            if (index !== -1) {
                state.projects[index] = state.editingProject;
            } else {
                state.projects.push(state.editingProject);
            }
            state.showModal = false;
            state.editingProject = null;
            notify("Estrategia guardada localmente");
            render();
        }

        function addObjective() {
            state.editingProject.objectives.push({
                id: 'O' + (state.editingProject.objectives.length + 1),
                title: 'Nuevo Objetivo Estratégico',
                krs: []
            });
            render();
        }

        function addKR(objIdx) {
            state.editingProject.objectives[objIdx].krs.push({
                id: `KR${objIdx+1}.${state.editingProject.objectives[objIdx].krs.length + 1}`,
                definition: 'Nuevo Resultado Clave',
                target: 100,
                current: 0,
                owner: state.user.name
            });
            render();
        }

        async function syncCloud() {
            state.isSaving = true; render();
            // Simulación de envío a Sheets (aquí iría el fetch POST)
            setTimeout(() => {
                state.isSaving = false;
                state.lastSync = new Date().toLocaleTimeString();
                notify("Sincronizado con Google Sheets");
                render();
            }, 1000);
        }

        // --- RENDERIZADO ---
        function render() {
            const app = document.getElementById('app');
            if (!state.user) {
                app.innerHTML = renderLogin();
            } else {
                const filtered = state.user.role === 'Super Admin' ? state.projects : state.projects.filter(p => p.squadId === state.user.squadId);
                app.innerHTML = `
                    <div class="flex h-full overflow-hidden">
                        ${renderSidebar()}
                        <main class="flex-1 overflow-y-auto p-8 custom-scrollbar relative">
                            ${renderNotification()}
                            <div class="max-w-6xl mx-auto">
                                ${state.activeTab === 'dashboard' ? renderDashboard(filtered) : ''}
                                ${state.activeTab === 'projects' ? renderProjects(filtered) : ''}
                                ${state.activeTab === 'sync' ? renderSync() : ''}
                            </div>
                        </main>
                    </div>
                    ${state.showModal ? renderModal() : ''}
                `;
            }
            lucide.createIcons();
        }

        function renderLogin() {
            return `
                <div class="min-h-screen bg-slate-950 flex items-center justify-center p-6 animate-fade-in">
                    <div class="max-w-md w-full bg-slate-900 rounded-[3rem] border border-slate-800 p-12 card-shadow text-center">
                        <div class="bg-cyan-500 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-cyan-500/20">
                            <i data-lucide="target" class="text-white w-8 h-8"></i>
                        </div>
                        <h1 class="text-3xl font-black text-white italic tracking-tighter mb-2">Cori<span class="text-cyan-400 font-light">Talks</span></h1>
                        <p class="text-slate-500 text-sm mb-10">Plataforma de Impacto OKR</p>
                        <form onsubmit="event.preventDefault(); handleLogin(this.email.value, this.role.value, this.squad.value);" class="space-y-6 text-left">
                            <input name="email" type="email" placeholder="email@comfamiliar.com" required class="w-full bg-slate-800 border border-slate-700 rounded-2xl px-6 py-4 text-white focus:ring-2 focus:ring-cyan-500 outline-none">
                            <div class="grid grid-cols-2 gap-4">
                                <select name="role" onchange="this.nextElementSibling.style.display = this.value === 'Super Admin' ? 'none' : 'block'" class="bg-slate-800 border border-slate-700 rounded-2xl px-4 py-4 text-white text-xs outline-none cursor-pointer">
                                    ${state.roles.map(r => `<option value="${r}">${r}</option>`).join('')}
                                </select>
                                <select name="squad" class="bg-slate-800 border border-slate-700 rounded-2xl px-4 py-4 text-white text-xs outline-none cursor-pointer">
                                    ${state.squads.map(s => `<option value="${s.id}">${s.name.split(' ')[1]}</option>`).join('')}
                                </select>
                            </div>
                            <button class="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-black py-4 rounded-2xl shadow-xl shadow-cyan-900/20 transition-all">Ingresar al Dashboard</button>
                        </form>
                    </div>
                </div>
            `;
        }

        function renderSidebar() {
            const tabs = [
                { id: 'dashboard', label: 'Dashboard', icon: 'layout-dashboard' },
                { id: 'projects', label: 'Mis Proyectos', icon: 'briefcase' },
                { id: 'sync', label: 'Cloud Sync', icon: 'database' }
            ];
            return `
                <aside class="w-72 bg-slate-950 text-white flex flex-col shrink-0 border-r border-slate-900">
                    <div class="p-8 border-b border-slate-900">
                        <div class="flex items-center gap-3 mb-8">
                            <i data-lucide="target" class="text-cyan-400 w-6 h-6"></i>
                            <h1 class="text-2xl font-black italic tracking-tight">Cori<span class="text-cyan-400 font-light">Talks</span></h1>
                        </div>
                        <div class="p-4 bg-slate-900/50 rounded-2xl border border-slate-800 flex items-center gap-4">
                            <div class="w-10 h-10 bg-cyan-600 rounded-xl flex items-center justify-center font-black text-sm uppercase">${state.user.name.substring(0,2)}</div>
                            <div class="overflow-hidden">
                                <p class="text-sm font-bold truncate leading-none mb-1">${state.user.name}</p>
                                <p class="text-[10px] text-cyan-500 font-black uppercase tracking-tighter">${state.user.role}</p>
                            </div>
                        </div>
                    </div>
                    <nav class="flex-1 p-6 space-y-2">
                        ${tabs.map(t => `
                            <button onclick="state.activeTab = '${t.id}'; render();" class="w-full flex items-center gap-4 px-6 py-4 rounded-2xl transition-all ${state.activeTab === t.id ? 'bg-cyan-600 text-white shadow-lg shadow-cyan-900/20' : 'text-slate-500 hover:bg-slate-900 hover:text-white'}">
                                <i data-lucide="${t.icon}" class="w-5 h-5"></i> <span class="text-sm font-bold">${t.label}</span>
                            </button>
                        `).join('')}
                    </nav>
                    <div class="p-8 border-t border-slate-900">
                        <button onclick="syncCloud()" class="w-full bg-white/5 border border-white/10 hover:bg-white/10 text-white rounded-2xl py-3 flex items-center justify-center gap-2 font-black text-[10px] uppercase tracking-widest mb-4">
                            <i data-lucide="${state.isSaving ? 'refresh-cw' : 'save'}" class="w-4 h-4 ${state.isSaving ? 'animate-spin' : ''}"></i> Sincronizar
                        </button>
                        <button onclick="state.user = null; render();" class="w-full flex items-center justify-center gap-2 text-slate-600 hover:text-red-400 text-[10px] font-black uppercase transition-colors">
                            <i data-lucide="log-out" class="w-4 h-4"></i> Salir
                        </button>
                    </div>
                </aside>
            `;
        }

        function renderDashboard(projects) {
            const global = getGlobalProgress(projects);
            return `
                <div class="animate-fade-in space-y-8">
                    <header class="flex justify-between items-end">
                        <div>
                            <h2 class="text-4xl font-black text-slate-900 tracking-tight">Dashboard Ejecutivo</h2>
                            <p class="text-slate-500 font-medium mt-1 italic">Visualización estratégica para ${state.user.role === 'Super Admin' ? 'Toda la Organización' : state.squads.find(s=>s.id===state.user.squadId).name}</p>
                        </div>
                        <div class="bg-white px-8 py-5 rounded-[2.5rem] card-shadow border border-slate-100 flex items-center gap-6">
                            <div class="relative w-16 h-16 flex items-center justify-center">
                                <svg class="w-full h-full -rotate-90">
                                    <circle cx="32" cy="32" r="28" fill="transparent" stroke="#f1f5f9" stroke-width="6" />
                                    <circle cx="32" cy="32" r="28" fill="transparent" stroke="#0ea5e9" stroke-width="6" stroke-dasharray="175.9" stroke-dashoffset="${175.9 - (175.9 * global) / 100}" stroke-linecap="round" />
                                </svg>
                                <span class="absolute font-black text-sm">${global}%</span>
                            </div>
                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none">Avance<br/>Estratégico</p>
                        </div>
                    </header>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        ${projects.map(p => `
                            <div class="bg-white p-8 rounded-[2.5rem] card-shadow border border-slate-100 group transition-all hover:-translate-y-1">
                                <div class="flex justify-between items-start mb-6">
                                    <div class="bg-slate-900 text-white px-3 py-1 rounded-lg font-black text-[10px]">${state.squads.find(s=>s.id===p.squadId).name.split(' ')[1]}</div>
                                    <span class="text-2xl font-black text-cyan-600">${calculateProjectProgress(p)}%</span>
                                </div>
                                <h3 class="text-xl font-black text-slate-800 mb-2 truncate">${p.name}</h3>
                                <p class="text-xs text-slate-400 font-medium mb-6 line-clamp-2 italic">"${p.description}"</p>
                                <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                    <div class="bg-cyan-500 h-full transition-all duration-1000" style="width: ${calculateProjectProgress(p)}%"></div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderProjects(projects) {
            return `
                <div class="animate-fade-in space-y-8">
                    <div class="flex justify-between items-center">
                        <h2 class="text-4xl font-black text-slate-900 tracking-tight italic uppercase">Gestión de Estrategia</h2>
                        <button onclick="openModal()" class="bg-slate-900 text-white px-8 py-5 rounded-[2rem] font-black text-xs uppercase tracking-widest flex items-center gap-3 hover:bg-cyan-600 transition-all shadow-xl">
                            <i data-lucide="plus" class="w-4 h-4"></i> Nuevo Proyecto
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        ${projects.map(p => `
                            <div class="bg-white rounded-[3rem] border border-slate-200 overflow-hidden relative card-shadow group">
                                <button onclick="openModal('${p.id}')" class="absolute top-8 right-8 p-4 bg-slate-50 text-slate-400 hover:text-cyan-600 hover:bg-cyan-50 rounded-2xl transition-all shadow-sm">
                                    <i data-lucide="edit-3" class="w-5 h-5"></i>
                                </button>
                                <div class="p-10 border-b border-slate-50 bg-slate-50/50">
                                    <span class="bg-white border border-slate-200 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-500 shadow-sm inline-block mb-6">
                                        ${state.squads.find(s=>s.id===p.squadId).name}
                                    </span>
                                    <h3 class="text-3xl font-black text-slate-900 mb-4 pr-12">${p.name}</h3>
                                    <p class="text-sm text-slate-500 leading-relaxed font-medium italic">"${p.description}"</p>
                                </div>
                                <div class="p-10 space-y-6">
                                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">OBJETIVOS ESTRATÉGICOS (${p.objectives.length})</p>
                                    <div class="space-y-4">
                                        ${p.objectives.map(obj => `
                                            <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100 flex justify-between items-center">
                                                <span class="text-sm font-bold text-slate-800">${obj.title}</span>
                                                <span class="text-[10px] font-black text-cyan-600 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm">${calculateObjectiveProgress(obj)}%</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div class="pt-6 border-t border-slate-100 flex justify-between items-end">
                                        <div>
                                            <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">AVANCE PROYECTO</p>
                                            <p class="text-4xl font-black text-cyan-600">${calculateProjectProgress(p)}%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderModal() {
            const p = state.editingProject;
            return `
                <div class="fixed inset-0 z-[100] bg-slate-950/90 backdrop-blur-xl flex items-center justify-center p-6 overflow-hidden animate-fade-in">
                    <div class="bg-white w-full max-w-5xl h-[90vh] rounded-[3.5rem] shadow-2xl flex flex-col overflow-hidden">
                        <div class="p-10 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                            <div>
                                <h2 class="text-3xl font-black text-slate-900 tracking-tight italic">Configuración Estratégica</h2>
                                <p class="text-slate-500 font-medium">Define los objetivos y resultados clave para el éxito.</p>
                            </div>
                            <button onclick="state.showModal = false; render();" class="p-4 bg-white hover:bg-slate-100 rounded-3xl text-slate-400 border border-slate-200 shadow-sm transition-all"><i data-lucide="x" class="w-6 h-6"></i></button>
                        </div>

                        <div class="flex-1 overflow-y-auto p-10 custom-scrollbar space-y-12">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                                <div class="space-y-6">
                                    <div>
                                        <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">Nombre del Proyecto</label>
                                        <input type="text" value="${p.name}" onchange="state.editingProject.name = this.value" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:ring-4 focus:ring-cyan-500/10 font-bold text-lg">
                                    </div>
                                    <div>
                                        <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">Reseña</label>
                                        <textarea onchange="state.editingProject.description = this.value" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 h-32 outline-none focus:ring-4 focus:ring-cyan-500/10 font-medium">${p.description}</textarea>
                                    </div>
                                </div>

                                <div class="md:col-span-2 space-y-8">
                                    <div class="flex justify-between items-center mb-6">
                                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">OBJETIVOS Y RESULTADOS (OKRs)</p>
                                        <button onclick="addObjective()" class="bg-cyan-600 text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 hover:bg-cyan-700 transition-all"><i data-lucide="plus" class="w-3 h-3"></i> Nuevo Objetivo</button>
                                    </div>

                                    <div class="space-y-8">
                                        ${p.objectives.map((obj, oIdx) => `
                                            <div class="bg-slate-50 border border-slate-200 rounded-[2.5rem] overflow-hidden">
                                                <div class="p-6 bg-white border-b border-slate-100 flex items-center gap-4">
                                                    <div class="w-10 h-10 bg-slate-900 rounded-2xl flex items-center justify-center text-white font-black text-xs">O${oIdx+1}</div>
                                                    <input type="text" value="${obj.title}" onchange="state.editingProject.objectives[${oIdx}].title = this.value" class="flex-1 font-black text-slate-800 outline-none bg-transparent">
                                                    <button onclick="addKR(${oIdx})" class="text-cyan-600 text-[10px] font-black uppercase tracking-widest flex items-center gap-1 hover:underline"><i data-lucide="plus" class="w-3 h-3"></i> KR</button>
                                                </div>
                                                <div class="p-6 space-y-3">
                                                    ${obj.krs.map((kr, kIdx) => `
                                                        <div class="grid grid-cols-12 gap-4 bg-white p-4 rounded-2xl border border-slate-100 items-center shadow-sm">
                                                            <div class="col-span-6 font-bold text-xs"><input type="text" value="${kr.definition}" onchange="state.editingProject.objectives[${oIdx}].krs[${kIdx}].definition = this.value" class="w-full outline-none"></div>
                                                            <div class="col-span-3 flex items-center gap-2 bg-slate-50 px-3 py-1 rounded-lg">
                                                                <input type="number" value="${kr.current}" onchange="state.editingProject.objectives[${oIdx}].krs[${kIdx}].current = parseFloat(this.value)" class="w-full text-center font-black text-[10px] bg-transparent">
                                                                <span class="text-slate-300">/</span>
                                                                <input type="number" value="${kr.target}" onchange="state.editingProject.objectives[${oIdx}].krs[${kIdx}].target = parseFloat(this.value)" class="w-full text-center font-black text-[10px] bg-transparent text-slate-400">
                                                            </div>
                                                            <div class="col-span-2 text-[10px] font-bold text-slate-400 uppercase truncate">${kr.owner}</div>
                                                            <div class="col-span-1 flex justify-end">
                                                                <button onclick="state.editingProject.objectives[${oIdx}].krs.splice(${kIdx}, 1); render();" class="text-slate-300 hover:text-red-500 transition-colors"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                    ${obj.krs.length === 0 ? '<p class="text-[10px] text-slate-400 italic text-center py-2">Sin resultados clave. Pulsa "+ KR" para añadir.</p>' : ''}
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-10 border-t border-slate-100 bg-slate-50/50 flex gap-4">
                            <button onclick="saveProject()" class="flex-1 bg-slate-900 text-white font-black py-6 rounded-[2rem] uppercase text-xs tracking-[0.2em] shadow-2xl hover:bg-cyan-600 active:scale-95 transition-all">Guardar Estrategia</button>
                            <button onclick="state.showModal = false; render();" class="px-10 border border-slate-200 font-black py-6 rounded-[2rem] uppercase text-xs tracking-[0.2em] hover:bg-white transition-all">Cancelar</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSync() {
            return `
                <div class="animate-fade-in max-w-4xl mx-auto space-y-8">
                    <div class="bg-white p-12 rounded-[3.5rem] card-shadow border border-slate-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-12 opacity-5 pointer-events-none"><i data-lucide="database" class="w-48 h-48"></i></div>
                        <div class="flex items-center gap-6 mb-12 relative z-10">
                            <div class="p-5 bg-cyan-100 text-cyan-600 rounded-[2rem] shadow-inner"><i data-lucide="database" class="w-12 h-12"></i></div>
                            <div><h2 class="text-3xl font-black text-slate-900 tracking-tight">Infraestructura Cloud</h2><p class="text-slate-500 font-medium">Control total de la sincronización bidireccional.</p></div>
                        </div>
                        <div class="space-y-6 relative z-10">
                            <div class="bg-slate-50 p-10 rounded-[2.5rem] border border-slate-200">
                                <label class="block text-[10px] font-black text-slate-400 uppercase mb-4 tracking-widest">URL del Script de Google (API)</label>
                                <div class="flex gap-4">
                                    <input type="text" value="${state.sheetUrl}" onchange="state.sheetUrl = this.value" class="flex-1 bg-white border border-slate-200 rounded-2xl px-6 py-4 text-xs font-mono text-slate-600 outline-none">
                                    <button onclick="syncCloud()" class="bg-slate-900 text-white px-8 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-cyan-600">Vincular</button>
                                </div>
                                <p class="mt-4 text-[10px] text-slate-400 font-bold uppercase tracking-tighter">Última Actualización: <span class="text-cyan-600">${state.lastSync}</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderNotification() {
            if (!state.notification) return '';
            return `
                <div class="fixed top-6 right-6 z-[200] px-8 py-5 rounded-[2rem] shadow-2xl border animate-fade-in ${state.notification.type === 'error' ? 'bg-red-50 text-red-700 border-red-100' : 'bg-white text-slate-800 border-slate-100'} flex items-center gap-4">
                    <i data-lucide="${state.notification.type === 'error' ? 'alert-circle' : 'check-circle-2'}" class="w-6 h-6"></i>
                    <p class="font-bold text-sm uppercase tracking-tighter">${state.notification.msg}</p>
                </div>
            `;
        }

        // --- INIT ---
        window.onload = render;
    </script>
</body>
</html>
